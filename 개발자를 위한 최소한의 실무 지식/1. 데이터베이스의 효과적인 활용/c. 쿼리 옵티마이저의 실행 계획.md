### 개요
- 쿼리문을 실행하는 방법에는 두가지가 있다.
  - 테이블 전체를 찾는 풀 테이블 스캔과 인덱스에서 지름길 정보를 찾는 인덱스 스캔이다.
  - 이 중 어떤 방법으로 실행할지는 상황에 따라 다르다.

> DBMS는 쿼리를 최적으로 실행할 계획을 짠다.   
> 쿼리문을 실행하면 DBMS에 있는 `쿼리 옵티마이저`가 이 쿼리문에 맞게 최적의 실행 계획을 세운다.

- '최적'의 방법이란 '비용'이다.  
  - DBMS는 최소 비용으로 쿼리를 실행하기 위해 쿼리문 실행 시간을 절약하는 방법으로 계획을 세운다.
  - 쿼리 옵티마이저의 실행 계획에 관심을 가져야하는 이유가 여기에 있다.
  - 쿼리문을 어떻게 작성하느냐가 곧 시스템의 성능을 좌우하기 때문이다.

### 옵티마이저의 동작 과정
1. 사용자가 쿼리문을 실행한다.
2. 옵티마이저는 자신이 처리할 수 있는 형태로 쿼리문을 변환한다.
3. 테이블에 대한 통계 정보를 활용해서 쿼리문 실행에 얼마나 많은 작업을 해야 하는지 비용 측면에서 계산한다.
4. 이 계산 결과를 바탕으로 최적의 실행 계획을 세운다.

> MariaDB에서는 EXPLAIN 키워드를 사용해서 실행 계획을 확인할 수 있다.

- `SELECT * FROM 학생;` 이 쿼리문을 실행하면 풀테이블 스캔을 통해 데이터를 가져온다. 테이블의 모든 데이터를 가져와야 하기 때문에 인덱스를 거칠 필요가 없다. `EXPLAIN SELECT * FROM 학생;`EXPLAIN으로 확인하면 key의 값이 null이다. 인덱스를 사용하지 않는다는 뜻이다.
- `EXPLAIN SELECT * FROM 학생 WHERE 학번 = 20180346;` 해당 명령어로 실행 계획을 살펴보면 key의 열에 'PRIMARY'라는 단어가 있다. 학번이 기본 키로 지정되었기 때문에 인덱스를 사용한 것이다.

> 프로그램에서 자주 사용되는 쿼리문을 풀 테이블 스캔을 하면 DBMS에 부담을 줄 수 있다. 따라서, 실행 계획을 확인해보고 필요하다면 인덱스를 지정하는 것이 좋다.

### DBMS의 힌트
DBMS에는 힌트라는 기능이 있다. 옵티마이저의 실행 계획을 변경할 수 있도록 알려주는 기능이다. 
```sql
EXPLAIN SELECT * FROM 학생 FORCE_INDEX(학과_idx) WHERE 학과 = '컴퓨터공학과'; 
```
FORCE INDEX라는 키워드를 사용하여서 풀 테이블 스캔으로 세운 실행 계획을 인덱스 스캔으로 변경할 수 있다.

🚨 옵티마이저는 실행 계획을 세울 때 힌트를 우선 고려한다. 따라서, 잘못된 힌트 사용은 오히려 옵티마이저의 올바른 판단을 방해할 수 있다.